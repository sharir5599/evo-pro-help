<app-global-nav>
	<nav-menu css="ui-background" items="{ navMenuItems }" />
	<div id="rootBar" class="root-bar { expand:isVisible,contract:!isVisible }">
		<nav-bar css="ui-primary"></nav-bar>
	</div>
	<ui-auth-spinner css="{ spinner  ? 'show' : 'hide' }" ></ui-auth-spinner>
	<div id="globalNavMount" class="root-mount scroll-1 { expand:isVisible,contract:!isVisible }"></div>
	<style>
		.root-bar,
		.root-mount,
		.nav-bar { transition:.2s ease-in-out all; }
		.root-bar { overflow:hidden;}
		.root-bar.expand { height:3.5em; }
		.root-bar.contract { height:0; }
		.root-bar.expand .nav-bar { margin-top:0; }
		.root-bar.contract .nav-bar { margin-top:-3.5em; }
		.root-mount.expand { height:calc(100vh - 3.5em); }
		.root-mount.contract { height:100vh; }
	</style>
	<script>
		// VARIABLES
		var self = this;
		isVisible = true;
		// --------------------------------------
		// ON MOUNT
		// --------------------------------------
		self.on('mount',function() {
			// --------------------------------------
			// NAV-BAR SCROLL-AWAY
			// --------------------------------------
			var SCROLLER = document.getElementById('globalNavMount'),
					isScrolling = -1,
					lastPosition = 0;
			SCROLLER.onscroll = function() {
				if(isScrolling != -1) {
					clearTimeout(isScrolling);
				}
				isScrolling = window.setTimeout("scrollStop()",200);
			}
			scrollStop = function() {
				var currentPosition = SCROLLER.scrollTop;
				if(currentPosition < lastPosition) {
					var DIFF = lastPosition - currentPosition;
					if(DIFF > 56 && isVisible == false) {
						isVisible = true;
						lastPosition = currentPosition;
						self.update();
					}
				} else if(currentPosition > lastPosition) {
					var DIFF = currentPosition - lastPosition;
					if(DIFF > 56 && isVisible == true) {
						isVisible = false;
						lastPosition = currentPosition;
						self.update();
					}
				} else if(currentPosition == lastPosition) {
					lastPosition = currentPosition;
				}
			}
		});
	</script>
</app-global-nav>
