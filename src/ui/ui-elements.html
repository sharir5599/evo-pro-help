<!--
NAV MENU
!-->
<nav-menu>
	<div class="nav-menu { opts.css } { closed: !menuIsOpen }">
		<div class="nav-menu-bar f-row ai-center jc-start ui-accent">
			<nav-bar-icon mdicon="mdi mdi-close" onclick="{ menuClose }" />
			<nav-bar-logo menu="{ true }" /> </div>
		<div class="nav-menu-bar f-row ai-center ui-accent shadow-bar"><img src="{ photoURL }" class="pointer" width="40px" style="border-radius:50%;" onclick="{ getMyAccount }">
			<div class="pad-dot-25"></div>
			<div class="f-col f-one"> <span>{ displayName || 'Unknown' }</span> <span>{ companyName || 'Not Logged In' }</span> </div>
			<nav-bar-icon mdicon="mdi mdi-chevron-down" /> </div>
		<div class="links">
			<div class="pad-dot-5"></div>
			<div class="nav-link f-row ai-center jc-start" each="{ opts.items }" route="{ opts.route }" onclick="{ menuClick }">
				<nav-bar-icon mdicon="{ mdicon }" />
				<h4>{ name }</h4> </div>
		</div>
	</div>
	<style>
		.nav-menu {
			position: fixed;
			z-index: 10000;
			width: 19em;
			height: 100vh;
			top: 0;
			left: 0;
			box-shadow: 1px 0px 3px 2px rgba(0, 0, 0, 0.25);
			transition: .2s ease-in-out all;
		}

		.links {
			height: calc(100vh - 7em);
			overflow-y: auto;
		}

		.nav-menu.closed {
			left: -20em;
			box-shadow: none;
		}

		.nav-menu-bar {
			height: 3.5em;
			padding: 0em .5em;
		}

		.nav-link {
			padding: 0em .5em;
			cursor: pointer;
			transition: .2s ease-in-out all;
		}

		.nav-link:hover {
			background: rgba(0, 0, 0, 0.1);
		}

		h4 {
			font-weight: 400;
			margin: 0;
			padding: 0em .5em;
		}
	</style>
	<script>
		var self = this;
		menuIsOpen = false;
		menuClick = function(e) {
			RC.trigger('UI_SET_STATE', {
				navMenu: false
			});
			switch (e.item.route) {
				case '/login':
					RC.trigger('AM_SIGN_OUT');
					break;
				default:
					route(e.item.route);
			}
		}
		menuClose = function(e) {
			RC.trigger('UI_SET_STATE', {
				navMenu: false
			});
		};
		getMyAccount = function() {
			route('/dashboard/my-account');
			menuClose();
		}
		localStorage.userModule ? self.photoURL = JSON.parse(localStorage.userModule).PhotoURL : self.photoURL = '';
		localStorage.userModule ? self.displayName = JSON.parse(localStorage.userModule).DisplayName : self.displayName = '';
		RC.on('UI_STATE_CHANGED', function(newState) {
			if (newState) {
				// console.log(newState);
				menuIsOpen = newState.navMenu;
				newState.userModule ? self.displayName = newState.userModule.DisplayName : self.displayName = null;
				localStorage.companyModule ? self.companyName = JSON.parse(localStorage.companyModule).Name : self.companyName = newState.companyModule ? companyModule.Name : null;
				newState.userModule ? self.photoURL = newState.userModule.PhotoURL : self.photoURL = null;
				self.update();
			}
		});
	</script>
</nav-menu>
<!--
NAV BAR
!-->
<nav-bar>
	<div class="nav-bar f-row ai-center jc-between { opts.css }">
		<div class="left f-row ai-center">
			<nav-bar-icon hide="{ hideMenuIcon }" mdicon="mdi mdi-menu" onclick="{ menuOpen }" />
			<nav-bar-logo /> </div>
		<div class="right f-row ai-center">
			<nav-bar-icon mdicon="{ signedIn ? 'mdi mdi-logout' : 'mdi mdi-login' }" onclick="{ getAuth }" />
			<!--
			<nav-bar-icon mdicon="mdi mdi-magnify" />
			<nav-bar-icon mdicon="mdi mdi-history" />
			<nav-bar-icon mdicon="mdi mdi-comment-text-outline" />
!-->
		</div>
	</div>
	<style>
		.nav-bar {
			height: 3.5em;
			padding: 0em .5em;
		}

		.hide {
			display: none;
		}

		.show {
			display: flex;
		}
	</style>
	<script>
		var self = this;
		menuOpen = function(e) {
			RC.trigger('UI_SET_STATE', {
				navMenu: true
				// hideMenuIcon: self.hideMenuIcon,
				// showLoginIcon: self.showLoginIcon
			});
		};
		this.on('mount', function() {
			var signedIn = localStorage.signedIn || false;
			var hideMenuIcon = "";
			localStorage.UI_STATE ? self.hideMenuIcon = JSON.parse(localStorage.UI_STATE).hideMenuIcon : self.hideMenuIcon = "";
			switch (window.location.hash) {
				case '#login':
				case '#signup':
				case '#company/setup':
				case '#confirm':
				case '#payment':
				case '#landing':
				case '#pos/login':
				case '#complete-setup':
					self.hideMenuIcon = true;
					self.update();
					break;
				case '#':
					signedIn ? self.hideMenuIcon = false : self.hideMenuIcon = false;
					self.update();
					break;
				case '':
					signedIn ? self.hideMenuIcon = false : self.hideMenuIcon = true;
					self.update();
					break;
				default:
					self.hideMenuIcon = false;
					self.update();
			}
		});
		// var signedIn = localStorage.signedIn || false;
		RC.on('UI_STATE_CHANGED', function(s) {
			if (s) {
				// self.hideMenuIcon = s.hideMenuIcon;
				self.showLoginIcon = s.showLoginIcon;
				self.signedIn = s.signedIn || false;
				self.route = s.route;
				// self.update();
			}
		});
		getAuth = function() {
			if (self.signedIn == true || self.signedIn == 'true') {
				RC.trigger('AM_SIGN_OUT');
			} else {
				if (self.route == '/login') {
					route('/signup');
				} else {
					route('/login');
				}
			}
			self.update(self.signedIn);
		}
	</script>
</nav-bar>
<!--
NAV BAR ICON
!-->
<nav-bar-icon>
	<div class="nav-bar-icon f-row ai-center jc-center { opts.css }"> <i class="{ opts.mdicon }"></i> </div>
	<style>
		.nav-bar-icon {
			width: 2.5em;
			height: 2.5em;
			border-radius: 50%;
			cursor: pointer;
			transition: .2s ease-in-out all;
		}

		.nav-bar-icon>i {
			font-size: 1.5em;
		}

		.nav-bar-icon:hover {
			box-shadow: 0px 2px 3px 2px rgba(0, 0, 0, 0.15);
		}
	</style>
</nav-bar-icon>
<!--
NAV BAR LOGO
!-->
<nav-bar-logo>
	<div class="svg-resize">
		<div class="{ opts.menu ? 'svg-test-menu' : 'svg-test' }"></div>
	</div>
	<style>
		.svg-test {
			background-image: url('https://cdn.evosus.com/res/img/evosus_logo_retail-pro.png');
			background-size: contain;
			background-repeat: no-repeat;
			background-position: center center;
			width: 100%;
			height: 100%;
		}

		.svg-test-menu {
			background-image: url('https://cdn.evosus.com/res/img/evosus_logo_retail-pro.png');
			background-size: contain;
			background-repeat: no-repeat;
			background-position: center center;
			width: 100%;
			height: 100%;
		}

		.svg-resize {
			width: 7.5em;
			height: 1.8em;
		}
	</style>
</nav-bar-logo>
<!--
TAB BAR
!-->
<tab-bar>
	<div class="tab-bar f-row ai-stretch { opts.css }">
		<virtual each="{ tab in opts.items }">
			<div class="tab { active:parent.opts.active==tab.name } f-one f-row ai-center jc-center" onclick="{ tabClick }"> <span>{ tab.name }</span> </div>
		</virtual>
	</div>
	<style>
		.tab-bar {
			height: 3em;
			padding: 0em 1em;
			box-shadow: 0px 3px 3px 1px rgba(0, 0, 0, 0.25);
		}

		.tab {
			border-bottom: 2px solid transparent;
			cursor: pointer;
			transition: .2s ease-in-out all;
		}

		.tab:hover {
			background: rgba(0, 0, 0, 0.1);
		}

		.active {
			border-bottom: 2px solid white;
			cursor: default;
		}

		.tab.active:hover {
			background: none;
		}

		.tab>span {
			font-size: .875em;
			font-weight: 400;
			margin: 0;
			opacity: 0.8;
		}

		.tab.active span {
			font-weight: 700;
			opacity: 1;
		}
	</style>
	<script>
		tabClick = function(e) {
			IO.trigger('TAB_BAR_CLICKED', {
				name: opts.name || 'unnamed',
				event: e
			});
		}
	</script>
</tab-bar>
<!--
TITLE BAR
!-->
<title-bar>
	<div class="title-bar f-row ai-center jc-between { opts.css }">
		<div class="left f-row ai-center">
			<nav-bar-icon show="{ titleIsOpen }" mdicon="{ opts.mdicon }" css="ui-primary" onclick="{ iconClick }" />
			<nav-bar-icon show="{ !titleIsOpen }" mdicon="{ opts.mdicon }" onclick="{ iconClick }" /> <span class="title"><h1>{ opts.title + companyName }</h1></span> </div>
		<div class="right f-row ai-center"> </div>
	</div>
	<style>
		h1 {
			font-size: 1em;
			font-weight: 400;
			margin: 0;
		}

		.title-bar {
			height: 3.5em;
			padding: 0em .5em;
		}

		.title {
			padding: 0em .5em;
		}

		.nav-bar-icon:hover {
			box-shadow: none;
		}
	</style>
	<script>
		var self = this;
		titleIsOpen = false;
		iconClick = function(e) {
			titleIsOpen ? titleIsOpen = false : titleIsOpen = true;
			RC.trigger('UI_SET_STATE', {
				iconBar: titleIsOpen
			});
		};
		if (localStorage.CompanyName) {
			companyName = ' - ' + localStorage.CompanyName
		} else {
			companyName = '';
		}
		RC.on('UI_STATE_CHANGED', function(state) {
			titleIsOpen = state.iconBar;
			self.update();
		});
	</script>
</title-bar>
<!--
SUBSCREEN BAR
!-->
<subscreen-bar>
	<div class="subscreen-bar f-row ai-center jc-between { opts.css }">
		<div class="left f-row ai-center">
			<nav-bar-icon mdicon="{ opts.mdicon }" onclick="{ backClick }" /> <span class="title"><h1>{ opts.title }</h1></span> </div>
		<div class="right f-row ai-center"> </div>
	</div>
	<style>
		h1 {
			font-size: 1em;
			font-weight: 400;
			margin: 0;
		}

		.subscreen-bar {
			height: 3.5em;
			padding: 0em .5em;
		}

		.title {
			padding: 0em .5em;
		}
	</style>
	<script>
		backClick = function() {
			window.history.back();
		}
	</script>
</subscreen-bar>
<!--
SUBTITLE BAR
!-->
<subtitle-bar>
	<div class="subtitle-bar f-row ai-center { opts.css }"> <span class="subtitle"><h2>{ opts.subtitle }</h2></span> </div>
	<style>
		.subtitle-bar {
			height: 3em;
			padding: 0em 1em 0em 3.5em;
		}

		.subtitle>h2 {
			font-size: .8175em;
			font-weight: 700;
			margin: 0;
			opacity: 0.5;
		}
	</style>
</subtitle-bar>
<!--
UI BTN
!-->
<ui-btn onclick="{ click }" onmouseover="{ hover }" onblur="{ blur }" onfocus="{ focus }"> <button class="ui-btn rounded { opts.css }">
		<div class="f-row ai-center jc-center">
			<i if="{ opts.mdicon }" class="{ opts.mdicon } f-col ai-center jc-center"></i>
			<span>{ opts.label }</span>
		</div>
	</button>
	<style>
		.ui-btn {
			height: 2.5em;
			margin: 0;
			padding: 0em .5em;
			border: none;
			cursor: pointer;
			font-weight: 700;
			transition: .25s ease-in-out all;
		}

		.ui-btn:hover {
			box-shadow: 0 5px 10px rgba(0, 0, 0, 0.25);
		}

		.ui-btn>div {
			height: 2.5em;
		}

		.ui-btn>div>span {
			padding: 0em .5em;
			text-transform: uppercase;
			letter-spacing: 1px;
		}
	</style>
</ui-btn>
<!--
UI BTN ICON
!-->
<ui-btn-icon onclick="{ click }" onmouseover="{ hover }" onblur="{ blur }" onfocus="{ focus }"> <button class="ui-btn-icon { opts.css }">
		<span class="f-col ai-center jc-center">
			<i class="{ opts.mdicon }"></i>
		</span>
	</button>
	<style>
		.ui-btn-icon {
			width: 2.5em;
			height: 2.5em;
			border-radius: 50%;
			transition: .25s ease-in-out all;
		}

		.ui-btn-icon:hover {
			box-shadow: 0 5px 10px rgba(0, 0, 0, 0.25);
		}

		.ui-btn-icon i {
			font-size: 1.5em;
			line-height: 0;
		}
	</style>
</ui-btn-icon>
<!--
UI SELECT
!-->
<ui-select>
	<div class="ui-select f-row ai-center { opts.css }">
		<div if="{ opts.mdicon }" class="ui-input-icon f-col ai-center jc-center"> <i class="{ opts.mdicon } fg-gray-dk"></i> </div> <select ref="htmlselect" value="{ selected }" onchange="{ change }" onfocus="{ focus }" onblur="{ blur }">
			<option each="{ item in opts.options }" selected="{ index == selected }">{ item.label }</option>
		</select> <i class="mdi mdi-chevron-down"></i>
		<div class="fill"></div>
	</div>
	<style>
		.ui-select {
			position: relative;
			background: none;
		}

		.ui-select select {
			cursor: pointer;
			padding: 0;
			margin: 0;
			border: 0;
			width: 100%;
			height: 2em;
			background: none;
			font-size: 100%;
			-webkit-appearance: none;
			-moz-appearance: none;
			text-indent: 1px;
			text-overflow: '';
		}

		.fill {
			position: absolute;
			bottom: 0;
			z-index: 100;
			width: 100%;
			height: 2px;
			background: #888888;
		}

		.ui-select>i {
			position: absolute;
			z-index: 100;
			right: .5em;
			pointer-events: none;
		}
	</style>
	<script>
		var self = this;
		selectIsOpen = false;
		this.on('mount', function() {
			// --------------------------------------
			// SET Selected Item
			// --------------------------------------
			if (!opts.selection) {
				self.refs.htmlselect.selectedIndex = 0;
				if (opts.options[0]) {
					if (opts.options[0].mdicon) {
						mdicon = opts.options[0].mdicon;
					}
					if (opts.options[0].svgclass) {
						mdicon = opts.options[0].svgclass;
					}
				}
			} else {
				var len = opts.options.length;
				for (i = 0; i < len; i++) {
					if (opts.options[i].label == opts.selection) {
						self.refs.htmlselect.selectedIndex = i;
						if (opts.options[i].mdicon) {
							mdicon = opts.options[i].mdicon;
						}
						if (opts.options[i].svgclass) {
							mdicon = opts.options[i].svgclass;
						}
					}
				}
			}
		});
		blur() {
			isFocused = false;
			self.update();
		}
		focus() {
			selectIsOpen = true;
			self.update();
		}
		change(e) {
			selectIsOpen = false;
			IO.trigger(opts.name + ':change', e.target.selectedOptions[0]._tag.item);
			self.refs.htmlselect.blur();
			self.update();
		}
	</script>
</ui-select>
<!--
UI CHECKBOX
!-->
<ui-checkbox onclick="{ setCheck }" class="ui-checkbox { opts.css }" checked="{ isChecked }">
	<div class="f-row ai-center">
		<div if="{ !opts.flip }" class="icon f-col ai-center jc-center"> <i class="{ mdi:true, mdi-checkbox-marked: isChecked, mdi-checkbox-blank-outline: !isChecked }"></i> </div>
		<div class="label { flipped:opts.flip }"> <span if="{ isChecked }">{ opts.positive }</span> <span if="{ !isChecked }">{ opts.negative }</span> </div>
		<div if="{ opts.flip }" class="ui-checkbox-icon f-col ai-center jc-center"> <i class="{ mdi:true, mdi-checkbox-marked: isChecked, mdi-checkbox-blank-outline: !isChecked }"></i> </div>
	</div>
	<style>
		.icon {
			width: 2em;
			height: 2em;
		}

		.icon>i {
			font-size: 150%;
		}

		.label {
			padding-left: .5em;
		}

		.label.flipped {
			padding-left: 0;
			padding-right: .5em;
		}
	</style>
	<script>
		var self = this;
		isChecked = false;
		self.setCheck = function(e) {
			self.isChecked ? self.isChecked = false : self.isChecked = true;
			IO.trigger(opts.name + ':checked', e);
			self.update();
		}
		this.on('mount', function() {
			self.isChecked = opts.checked || false;
			self.update();
		});
	</script>
</ui-checkbox>
<!--
UI LIST
!-->
<ui-list>
	<div class="ui-list { opts.css } hide-mq-3">
		<ui-list-subtitle if="{ opts.subtitle }" css="ui-disabled" subtitle="{ opts.subtitle }" />
		<!-- COMPACT LIST !-->
		<div class="ui-list-item f-row" each="{ item in opts.items }" name="{ item.leftTop }" onclick="{ rowClick }">
			<div if="{ item.mdiavatar }" class="left f-col ai-center jc-center"> <i class="{ item.mdiavatar } fg-inactive"></i> </div>
			<div class="center f-one f-row ai-center">
				<div class="left f-one f-col ai-start">
					<div class="top">{ item.leftTop }</div>
					<div class="bot">{ item.leftBot }</div>
				</div>
				<div if="{ item.rightTop || item.rightBot }" class="right f-one f-col ai-end">
					<div class="top">{ item.rightTop }</div>
					<div class="bot">{ item.rightBot }</div>
				</div>
			</div>
			<div if="{ item.mdicon }" class="right f-col ai-center jc-center"> <i class="{ item.mdicon }"></i> </div>
		</div>
	</div>
	<!-- FULL SIZE LIST !-->
	<div class="ui-list { opts.css } hide block-mq-3">
		<table width="100%" cellpadding="0" cellspacing="0" border="0">
			<tr class="ui-list-item" each="{ item in opts.items }" name="{ item.leftTop }" onclick="{ rowClick }">
				<td>
					<div if="{ item.mdiavatar }" class="left f-col ai-center jc-center"> <i class="{ item.mdiavatar } fg-inactive"></i> </div>
				</td>
				<td class="top f-one">{ item.leftTop }</td>
				<td class="top f-one">{ item.leftBot }</td>
				<td class="top f-one">{ item.rightTop }</td>
				<td class="top f-one">{ item.rightBot }</td>
				<td>
					<div if="{ item.mdicon }" class="right f-col ai-center jc-center"> <i class="{ item.mdicon }"></i> </div>
				</td>
			</tr>
		</table>
	</div>
	<style>
		.ui-list-item {
			cursor: pointer;
			height: 4em;
			padding: 0em .5em;
			border-bottom: 1px solid #e7e5e2;
			transition: .2s ease-in-out all;
		}

		.ui-list-item:hover {
			background: rgba(0, 0, 0, 0.05);
		}

		.left {
			padding: 0em .5em;
		}

		.left i {
			font-size: 2.5em;
		}

		.center {
			padding: 0em .5em 0em 0em;
		}

		.center>.left>.bot,
		.center>.right>.bot {
			font-size: 0.8175em;
			margin: .25em 0em 0em 0em;
			opacity: 0.6;
		}

		.ui-list-item>.right {
			padding: .5em;
		}

		.ui-list-item>.right i {
			font-size: 1.25em;
		}

		td {
			vertical-align: middle;
		}

		td:first-child {
			width: 72px;
		}
	</style>
	<script>
		var self = this;
		self.rowClick = function(e) {
			console.dir(e);
		}
	</script>
</ui-list>
<!--
UI LIST SUBTITLE
!-->
<ui-list-subtitle>
	<div class="ui-list-subtitle f-row ai-center { opts.css }"> <span if="{ opts.subtitle }" class="subtitle"><h2>{ opts.subtitle }</h2></span> </div>
	<style>
		.ui-list-subtitle {
			height: 3em;
			padding: 0em 1em;
		}

		.subtitle>h2 {
			font-size: .8175em;
			font-weight: 700;
			margin: 0;
			opacity: 0.5;
		}
	</style>
</ui-list-subtitle>
<!--
UI INPUT
!-->
<ui-input class="ui-input { opts.css }">
	<div class="label { fg-valid:isValid,fg-invalid:isInvalid }"><span>{ opts.label }</span></div>
	<div class="stack f-row">
		<div class="field f-row ai-center"> <input ref="field" name="{ opts.name }" class="f-one { fg-valid:isValid, fg-invalid:isInvalid }" type="{ opts.type || 'text' }" placeholder="{ opts.placeholder }" onfocus="{ setFocus }" onblur="{ setBlur }" /></input> <i if="{ isValid }" class="mdi mdi-check fg-valid"></i>			<i if="{ isInvalid }" class="mdi mdi-block-helper fg-invalid"></i> </div>
		<div if="{ !isValid && !isInvalid }" class="{ fill:1,underline:isFocused || refs.field.value.length }"></div>
		<div if="{ isValid && isInvalid }" class="{ fill:1,underline:isFocused || refs.field.value.length, ui-valid:isValid, ui-invalid:isInvalid }"></div>
	</div>
	<div class="message fg-failure"><span class="{ fg-valid:isValid,fg-invalid:isInvalid }">{ msg }</span></div>
	<style>
		i {
			margin: 0em .5em;
		}

		.label {
			font-size: 0.875em;
			padding: .25em 0em;
		}

		.message {
			height: 1em;
		}

		.message>span {
			padding: .25em 0em;
			font-style: italic;
			font-size: 0.875em;
		}

		.stack {
			position: relative;
			height: 2em;
		}

		.field {
			position: absolute;
			z-index: 200;
			height: 2em;
			width: 100%;
		}

		.fill {
			opacity: 0.2;
			position: absolute;
			z-index: 100;
			height: 2em;
			width: 100%;
			transition: .2s ease-in-out all;
			bottom: 0;
		}

		.fill.underline {
			opacity: 1;
			height: 2px;
			;
		}

		input {
			height: 100%;
			font-size: 100%;
			border: none;
			background: transparent;
			padding: 0 .5em;
		}
	</style>
	<script>
		var self = this;
		isFocused = null;
		isValid = null;
		isInvalid = null;
		isLocked = null;
		// --------------------------------------
		// EVENT HANDLERS
		// --------------------------------------
		self.setBlur = function(e) {
			if (e) {
				IO.trigger(opts.name + ':blur', e);
			}
		}
		self.setFocus = function(e) {
			if (e.target.name) {
				IO.trigger(opts.name + ':focus', e);
			}
		}
		self.setMessage = function(msg) {
			if (msg || self.msg) {
				self.msg = msg;
			} else {
				self.msg == null;
			}
			self.update();
		}
		// --------------------------------------
		// EVENT LISTENERS
		// --------------------------------------
		IO.on(opts.name + ":blur", function(e) {
			if (opts.name) {
				self.isFocused = null;
			}
		});
		IO.on(opts.name + ":focus", function() {
			if (self.refs.field) {
				self.refs.field.focus();
				self.isFocused = true;
				self.update();
			}
		});
		IO.on(opts.name + ":valid", function(msg) {
			self.isValid = true;
			self.isInvalid = null;
			self.setMessage(msg);
		});
		IO.on(opts.name + ":invalid", function(msg) {
			self.isValid = false;
			self.isInvalid = true;
			self.setMessage(msg);
		});
		IO.on(opts.name + ":change", function(newValue) {
			self.refs.field.value = newValue;
			self.setMessage();
		});
		// --------------------------------------
		// ON CLEAR
		// --------------------------------------
		IO.on(opts.ref + ":clear", function() {
			self.refs.field.value = '';
			self.isFocused = null;
			self.isValid = null;
			self.isInvalid = null;
			self.isTouched = null;
			self.refs.field.blur();
			self.setMessage();
		});
	</script>
</ui-input>
<ui-auth-spinner>
	<div class="{ opts.css === 'hide' ? opts.css : 'spinner-layout-container' }">
		<div class="{ spinner:hide } sk-cube-grid">
			<div class="sk-cube sk-cube1"></div>
			<div class="sk-cube sk-cube2"></div>
			<div class="sk-cube sk-cube3"></div>
			<div class="sk-cube sk-cube4"></div>
			<div class="sk-cube sk-cube5"></div>
			<div class="sk-cube sk-cube6"></div>
			<div class="sk-cube sk-cube7"></div>
			<div class="sk-cube sk-cube8"></div>
			<div class="sk-cube sk-cube9"></div>
		</div>
		<h1 class="fl fg-primary">{ spin_msg }</h1> </div>
	<script>
		var self = this;
		var spinner = "";
		var spin_msg = "";
		localStorage.UI_STATE ? spinner = JSON.parse(localStorage.UI_STATE).spinner : spinner = false;
		RC.on('UI_STATE_CHANGED', function(s) {
			if (s) {
				self.spinner = s.spinner;
				self.spin_msg = s.spinner_msg;
				self.update(self.spinner, self.spin_msg);
			}
		});
	</script>
</ui-auth-spinner>
<ui-modal-open-pos>
	<div class="{ !showPOSModal ? 'hide' : opts.css }">
		<div class="{ !showPOSModal ? 'hide' : '' }">
			<div class="item">
				<h3 class="fg-primary">{ stationState } POS Station - { currentStation }</h3>
			</div>
			<ui-input type="number" css="" placeholder="Enter Amount" label="Currency Total" onkeyup="{ syncStationInput }" name="INPUT_POS_OPEN" />
			<ui-btn css="ui-orange pad-1" label="{ showPOSModal ? 'Back' : 'Open POS Station' }" onclick="{ togglePOS }" />
			<ui-btn css="ui-orange pad-1" label="{ 'Close Station' }" onclick="{ toggleStationState }" />
		</div>
	</div>
	<script>
		var self = this;
		self.items = [];
		/** Object for a new item */
		self.newItem = {};
		RC.on('POS_OPEN_CHANGED', function(items) {
			self.items = items;
			self.update();
		});
		/** SYNC input fields with new item object */
		syncStationInput = function(e) {
			RC.trigger('LOG_DEBUG', JSON.stringify(self.newItem.INPUT_POS_OPEN), 'pos');
			self.newItem[e.target.name] = e.target.value;
			if (e.keyCode == 13) {
				e.preventDefault();
				RC.trigger('POS_TOGGLE_STATION',self.newItem.INPUT_POS_OPEN,localStorage.routeID);
			}
			self.update();
		}
		var showPOSModal = "";
		localStorage.UI_STATE ? showPOSModal = JSON.parse(localStorage.UI_STATE).showPOSModal : showPOSModal = false;
		localStorage.POS_MODULE_station_details ? currentStation = JSON.parse(localStorage.POS_MODULE_station_details).Name : currentStation = '';
		station_details = {};
		localStorage.POS_MODULE_station_details ? station_details = JSON.parse(localStorage.POS_MODULE_station_details) : station_details = {};
		d = station_details;
		if (d.IsCashDrawerOpen == true) {
			self.stationState = 'Close';
		}else {
			self.stationState = 'Open';
		}
		RC.on('UI_STATE_CHANGED', function(s) {
			if (s) {
				if (s.currentStationID) {
					localStorage.routeID = s.currentStationID;
				}
				self.showPOSModal = s.showPOSModal;
				if (s.POS_MODULE_station_details) {
					s.POS_MODULE_station_details.IsCashDrawerOpen == true ? self.stationState =  'Close' : self.stationState = 'Open';
					self.currentStation = s.POS_MODULE_station_details.Name;
				}
				self.update(self.showPOSModal,self.currentStation,self.stationState);
			}
		});
		self.toggleStationState = function() {
			if (self.newItem) {
				RC.trigger('POS_TOGGLE_STATION',self.newItem.INPUT_POS_OPEN,localStorage.routeID);
			}
		}
	</script>
</ui-modal-open-pos>
